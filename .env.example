# ============================================
# AI Provider Configuration
# ============================================
AI_PROVIDER=openai

# ============================================
# OpenAI Configuration
# ============================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_LIGHT_MODEL=gpt-4o-mini
OPENAI_LIGHT_TEMPERATURE=0.2
OPENAI_LIGHT_MAX_TOKENS=2000
OPENAI_HEAVY_MODEL=gpt-4o
OPENAI_HEAVY_TEMPERATURE=0.3
OPENAI_HEAVY_MAX_TOKENS=16000

# ============================================
# Google Gemini Configuration
# ============================================
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_LIGHT_MODEL=gemini-1.5-flash
GEMINI_LIGHT_TEMPERATURE=0.2
GEMINI_LIGHT_MAX_TOKENS=2000
GEMINI_HEAVY_MODEL=gemini-2.0-flash-exp
GEMINI_HEAVY_TEMPERATURE=0.3
GEMINI_HEAVY_MAX_TOKENS=16000

# ============================================
# Redis Configuration (Shared)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_SSL=False
REDIS_DECODE_RESPONSES=True

# ============================================
# RabbitMQ Configuration (Replaces Redis for Celery)
# ============================================
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/
RABBITMQ_MANAGEMENT_PORT=15672

# Celery Broker URL (RabbitMQ)
CELERY_BROKER_URL=amqp://guest:guest@localhost:5672//

# Celery Result Backend (MongoDB)
CELERY_RESULT_BACKEND=mongodb://localhost:27017/legal_policy_analyzer

# Task settings
CELERY_TASK_TRACK_STARTED=True
CELERY_TASK_TIME_LIMIT=600  # 10 minutes max per task
CELERY_TASK_SOFT_TIME_LIMIT=540  # 9 minutes warning
CELERY_TASK_ACKS_LATE=True
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# Result expiration (24 hours)
CELERY_RESULT_EXPIRES=86400

# Retry settings
CELERY_TASK_MAX_RETRIES=3
CELERY_TASK_DEFAULT_RETRY_DELAY=60

# ============================================
# API Configuration
# ============================================
API_TITLE=Legal Policy Analyzer API
API_VERSION=1.0.0
API_DESCRIPTION=تحليل سياسات المتاجر الإلكترونية للامتثال القانوني

# ============================================
# CORS Settings
# ============================================
ALLOWED_ORIGINS=["*"]

# ============================================
# Security Settings
# ============================================
RATE_LIMIT_REQUESTS=20
RATE_LIMIT_WINDOW=60
RATE_LIMIT_BLOCK_DURATION=15

MAX_REQUEST_SIZE=10485760
MAX_TEXT_LENGTH=50000
MIN_TEXT_LENGTH=50

# ============================================
# AI Service Limits
# ============================================
MAX_DAILY_REQUESTS=1000
MAX_DAILY_TOKENS=1000000
AI_TIMEOUT=120
AI_MAX_RETRIES=3

# ============================================
# Circuit Breaker
# ============================================
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=120

# ============================================
# Request Deduplication
# ============================================
DEDUPLICATION_TTL=300

# ============================================
# Idempotency Settings
# ============================================
IDEMPOTENCY_TTL=86400
IDEMPOTENCY_KEY_HEADER=X-Idempotency-Key
IDEMPOTENCY_ENABLE=True



# ============================================
# MongoDB Configuration (Replaces Redis)
# ============================================
MONGODB_URL=mongodb://localhost:27017
MONGODB_DATABASE=legal_policy_analyzer
MONGODB_USERNAME=
MONGODB_PASSWORD=
MONGODB_AUTH_SOURCE=admin
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_POOL_SIZE=100
MONGODB_TIMEOUT=5000