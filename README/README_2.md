# Legal Policy Analyzer API
# ูุญูู ุงูุงูุชุซุงู ุงููุงูููู ูููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ

ูุธุงู ูุชูุงูู ูุชุญููู ุณูุงุณุงุช ุงููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ ูุชูููู ุงูุชุซุงููุง ููููุงููู ุงูุณุนูุฏูุฉ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.

## ๐ฏ ุงููููุฒุงุช

- โ ุชุญููู ุซูุงุซุฉ ุฃููุงุน ูู ุงูุณูุงุณุงุช:
  - ุณูุงุณุงุช ุงูุงุณุชุฑุฌุงุน ูุงูุงุณุชุจุฏุงู
  - ุณูุงุณุฉ ุงูุญุณุงุจ ูุงูุฎุตูุตูุฉ
  - ุณูุงุณุฉ ุงูุดุญู ูุงูุชูุตูู

- ๐ค ุชุญููู ุฐูู ุจุงุณุชุฎุฏุงู GPT-4
- ๐ ุชูุงุฑูุฑ ุชูุตูููุฉ ุดุงููุฉ
- ๐จ ูุงุฌูุฉ ูุณุชุฎุฏู ุนุฑุจูุฉ ุณููุฉ
- ๐ ุฅููุงููุฉ ุงูุชุนุฏูู ูุงููุฑุงุฌุนุฉ
- ๐พ ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ ุจุตูุบุฉ JSON

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

- Python 3.8 ุฃู ุฃุญุฏุซ
- ููุชุงุญ API ูู OpenAI

### ุฎุทูุงุช ุงูุชุซุจูุช

#### 1. ุงุณุชูุณุงุฎ ุงููุดุฑูุน

```bash
git clone https://github.com/yourusername/legal-policy-analyzer.git
cd legal-policy-analyzer
```

#### 2. ุฅูุดุงุก ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ

**ูู Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**ูู Linux/Mac:**
```bash
python -m venv venv
source venv/bin/activate
```

#### 3. ุชุซุจูุช ุงูููุชุจุงุช

```bash
pip install -r requirements.txt
```

ุฃู ููุชุทููุฑ:
```bash
pip install -e ".[dev]"
```

#### 4. ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ

ุฃูุดุฆ ููู `.env` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู:

```env
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
```

#### 5. ุชุดุบูู ุงูุชุทุจูู

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### 6. ุงููุตูู ููุชุทุจูู

ุงูุชุญ ุงููุชุตูุญ ุนูู: `http://localhost:8000`

## ๐ ูููู ุงููุดุฑูุน

```
legal-policy-analyzer/
โโโ app/
โ   โโโ __init__.py
โ   โโโ main.py              # ุชุทุจูู FastAPI ุงูุฑุฆูุณู
โ   โโโ models.py            # ููุงุฐุฌ ุงูุจูุงูุงุช Pydantic
โ   โโโ config.py            # ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
โ   โโโ prompts/
โ   โ   โโโ __init__.py
โ   โ   โโโ policy_matcher.py        # ูุทุงุจูุฉ ููุน ุงูุณูุงุณุฉ
โ   โ   โโโ compliance_analyzer.py   # ุชุญููู ุงูุงูุชุซุงู
โ   โ   โโโ compliance_rules.py      # ููุงุนุฏ ุงูุงูุชุซุงู ุงููุงูููู
โ   โโโ services/
โ   โ   โโโ __init__.py
โ   โ   โโโ openai_service.py        # ุฎุฏูุฉ OpenAI
โ   โ   โโโ analyzer_service.py      # ุฎุฏูุฉ ุงูุชุญููู ุงูุฑุฆูุณูุฉ
โ   โโโ utils/
โ       โโโ __init__.py
โ       โโโ validators.py
โโโ templates/
โ   โโโ index.html           # ูุงุฌูุฉ ุงููุณุชุฎุฏู
โโโ static/
โ   โโโ css/
โ   โโโ js/
โโโ tests/
โ   โโโ __init__.py
โ   โโโ test_api.py
โโโ .env                     # ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ูุง ูุชู ุฑูุนู)
โโโ .gitignore
โโโ requirements.txt
โโโ setup.py
โโโ pyproject.toml
โโโ README.md
```

## ๐ง ุงุณุชุฎุฏุงู API

### ููุทุฉ ุงูููุงูุฉ ุงูุฑุฆูุณูุฉ

**POST** `/api/analyze`

#### ูุซุงู ุนูู ุงูุทูุจ:

```json
{
  "shop_name": "ูุชุฌุฑ ุงูุฃุฒูุงุก ุงูุนุตุฑูุฉ",
  "shop_specialization": "ููุงุจุณ ูุณุงุฆูุฉ",
  "policy_type": "ุณูุงุณุงุช ุงูุงุณุชุฑุฌุงุน ู ุงูุงุณุชุจุฏุงู",
  "policy_text": "ูุญู ููุนููู ุฅุฑุฌุงุน ุงูููุชุฌ ุฎูุงู 7 ุฃูุงู ูู ุชุงุฑูุฎ ุงูุงุณุชูุงู..."
}
```

#### ูุซุงู ุนูู ุงูุงุณุชุฌุงุจุฉ:

```json
{
  "success": true,
  "message": "ุชู ุงูุชุญููู ุจูุฌุงุญ",
  "policy_match": {
    "is_matched": true,
    "confidence": 95.5,
    "reason": "ุงููุต ูุทุงุจู ุณูุงุณุฉ ุงูุงุณุชุฑุฌุงุน ูุงูุงุณุชุจุฏุงู"
  },
  "compliance_report": {
    "overall_compliance_ratio": 78.5,
    "compliance_grade": "ุฌูุฏ",
    "critical_issues": [...],
    "strengths": [...],
    "weaknesses": [...],
    "ambiguities": [...],
    "summary": "...",
    "recommendations": [...]
  },
  "shop_name": "ูุชุฌุฑ ุงูุฃุฒูุงุก ุงูุนุตุฑูุฉ",
  "shop_specialization": "ููุงุจุณ ูุณุงุฆูุฉ",
  "policy_type": "ุณูุงุณุงุช ุงูุงุณุชุฑุฌุงุน ู ุงูุงุณุชุจุฏุงู",
  "analysis_timestamp": "2024-12-14T10:30:00"
}
```

### ููุงุท ููุงูุฉ ุฃุฎุฑู:

- **GET** `/` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- **GET** `/health` - ูุญุต ุตุญุฉ ุงูุฎุงุฏู
- **GET** `/api/policy-types` - ูุงุฆูุฉ ุฃููุงุน ุงูุณูุงุณุงุช ุงููุชุงุญุฉ
- **POST** `/api/export-report` - ุชุตุฏูุฑ ุงูุชูุฑูุฑ

## ๐งช ุงูุงุฎุชุจุงุฑ

```bash
pytest tests/
```

ููุงุฎุชุจุงุฑ ูุน ุงูุชุบุทูุฉ:
```bash
pytest --cov=app tests/
```

## ๐ฆ ุงูุชุบููู

### ุจูุงุก ุงูุญุฒูุฉ

```bash
python -m build
```

### ุงูุชุซุจูุช ูู ุงูุญุฒูุฉ ุงููุญููุฉ

```bash
pip install dist/legal_policy_analyzer-1.0.0-py3-none-any.whl
```

### ุงููุดุฑ ุนูู PyPI

```bash
twine upload dist/*
```

## ๐ ูุธุงู ุงูุฃูุงู ูุงูุญูุงูุฉ

ูุชุถูู ุงููุธุงู ุญูุงูุฉ ุดุงููุฉ ูุชุนุฏุฏุฉ ุงูุทุจูุงุช:

### ุทุจูุงุช ุงูุญูุงูุฉ

#### 1. Rate Limiting
- โ 20 ุทูุจ ูู ุงูุฏูููุฉ ููู IP
- โ ุญุธุฑ ุชููุงุฆู ููุฏุฉ 15 ุฏูููุฉ ุนูุฏ ุงูุชุฌุงูุฒ
- โ ุชุชุจุน ุฐูู ููุทูุจุงุช

#### 2. Input Validation
- โ ูุญุต ุทูู ุงููุต (50-50,000 ุญุฑู)
- โ ูุดู ุงููุญุชูู ุงููุดุจูู (XSS, Injection)
- โ ูุดู ุงููุญุชูู ุงููุญุธูุฑ
- โ ูุดู ุงูุชูุฑุงุฑ ุงูููุฑุท

#### 3. OpenAI Protection
- โ ุญุฏูุฏ ููููุฉ (1000 ุทูุจุ 1M tokens)
- โ Timeout protection (120 ุซุงููุฉ)
- โ Retry mechanism (3 ูุญุงููุงุช)
- โ Circuit breaker ุฐูู
- โ ุชูุฏูุฑ tokens ูุจู ุงูุฅุฑุณุงู

#### 4. Request Protection
- โ ุญุฏ ุฃูุตู ููุทูุจ: 10 MB
- โ ููุน ุงูุทูุจุงุช ุงูููุฑุฑุฉ (5 ุฏูุงุฆู)
- โ Security headers ุชููุงุฆูุฉ

### ุงูุญุฏูุฏ ูุงููููุฏ

```python
# Rate Limiting
MAX_REQUESTS = 20 per minute per IP
BLOCK_DURATION = 15 minutes

# Text Limits
MIN_TEXT_LENGTH = 50 characters
MAX_TEXT_LENGTH = 50,000 characters

# Request Size
MAX_REQUEST_SIZE = 10 MB

# OpenAI Daily Limits
MAX_DAILY_REQUESTS = 1000
MAX_DAILY_TOKENS = 1,000,000
```

### Status Codes

| Code | ุงูุญุงูุฉ | ุงููุตู |
|------|--------|-------|
| 200  | OK | ูุฌุญ ุงูุทูุจ |
| 400  | Bad Request | ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ |
| 413  | Payload Too Large | ุงูุทูุจ ูุจูุฑ ุฌุฏุงู |
| 429  | Too Many Requests | ุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ |
| 503  | Service Unavailable | ุงูุฎุฏูุฉ ูุนุทูุฉ ูุคูุชุงู |
| 504  | Gateway Timeout | ุงูุชูุช ูููุฉ ุงูุงุณุชุฌุงุจุฉ |

ูููุฒูุฏ ูู ุงูุชูุงุตููุ ุฑุงุฌุน [SECURITY_GUIDE.md](SECURITY_GUIDE.md)

---

ูุชุถูู ุงููุธุงู logging ุดุงูู ูุชุณุฌูู ุฌููุน ุงูุนูููุงุช:

### ููุฒุงุช Logging

- โ ุชุณุฌูู ุฌููุน Prompts ุงููุฑุณูุฉ ุฅูู OpenAI
- โ ุชุณุฌูู ุฌููุน ุงูุงุณุชุฌุงุจุงุช
- โ ุชุณุฌูู ุงูุฃุฎุทุงุก ูุงููุดุงูู
- โ ุฅุญุตุงุฆูุงุช ููููุฉ ููุชุญูููุงุช
- โ Logs ููููุฉ ูู Console
- โ ุญูุธ ุชููุงุฆู ูู ูููุงุช ููุธูุฉ

### ูููู Logs

```
logs/
โโโ app.log                    # Log ุนุงู
โโโ prompts/                   # ุฌููุน ุงูู Prompts
โโโ responses/                 # ุฌููุน ุงูุงุณุชุฌุงุจุงุช
โโโ errors/                    # ุงูุฃุฎุทุงุก
โโโ analytics/                 # ุฅุญุตุงุฆูุงุช ููููุฉ
```

### ุณูุฑูุจุชุงุช ุฅุฏุงุฑุฉ Logs

```bash
# ุชูุธูู logs ุฃูุฏู ูู 30 ููู (ูุญุต ุชุฌุฑูุจู)
python scripts.py cleanup 30 --dry-run

# ุชูุธูู ูุนูู
python scripts.py cleanup 30

# ุฃุฑุดูุฉ logs ุดูุฑ ูุนูู
python scripts.py archive 202412

# ุชูุฑูุฑ ูููู
python scripts.py daily-report 20241214

# ุชุญููู ุงูุฃุฎุทุงุก
python scripts.py analyze-errors 7
```

ูููุฒูุฏ ูู ุงูุชูุงุตููุ ุฑุงุฌุน [LOGGING_GUIDE.md](LOGGING_GUIDE.md)

---

- โ๏ธ **ูุง ุชุดุงุฑู ููุชุงุญ OpenAI API ุฃุจุฏุงู**
- โ ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูุฌููุน ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- โ ุชุฃูุฏ ูู ุฅุถุงูุฉ `.env` ุฅูู `.gitignore`

## ๐ ุงููุฑุงุฌุน ุงููุงููููุฉ

ูุนุชูุฏ ุงููุธุงู ุนูู:
- ูุธุงู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ุงูุณุนูุฏู (ุงููุงุฏุฉ 13ุ 14ุ 8ุ 4)
- ูุธุงู ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ (ุงููุงุฏุฉ 4ุ 10ุ 18ุ 19)

## ๐ค ุงููุณุงููุฉ

ูุฑุญุจ ุจุงููุณุงููุงุช! ุงูุฑุฌุงุก:

1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก ูุฑุน ููููุฒุฉ (`git checkout -b feature/AmazingFeature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add some AmazingFeature'`)
4. Push ุฅูู ุงููุฑุน (`git push origin feature/AmazingFeature`)
5. ูุชุญ Pull Request

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช MIT License - ุงูุธุฑ ููู [LICENSE](LICENSE) ููุชูุงุตูู.

## ๐ง ุงูุชูุงุตู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงููุ ูุฑุฌู ูุชุญ Issue ุนูู GitHub.

## ๐ ุดูุฑ ุฎุงุต

- OpenAI ูุชูููุฑ ููุงุฐุฌ GPT ุงููููุฉ
- ุงููุฌุชูุน ุงูุณุนูุฏู ููุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ

---

ุตูุน ุจู โค๏ธ ูููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ ุงูุณุนูุฏูุฉ
